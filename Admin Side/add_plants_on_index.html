<!doctype html>

<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
    <meta http-equiv="X-UA-Compatible" content="ie=edge"/>
    <title>Soil Compatibility</title>
    <!-- CSS files -->
    <link href="dist/css/tabler.min.css" rel="stylesheet"/>
    <link href="dist/css/tabler-flags.min.css" rel="stylesheet"/>
    <link href="dist/css/tabler-payments.min.css" rel="stylesheet"/>
    <link href="dist/css/tabler-vendors.min.css" rel="stylesheet"/>
    <link href="dist/css/demo.min.css" rel="stylesheet"/>
  </head>
  <body class="antialiased">
    <div class="wrapper">
      <div class="sticky-top">
        <header class="navbar navbar-expand-md navbar-light d-print-none ">
          <div class="container-xl">
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar-menu">
              <span class="navbar-toggler-icon"></span>
            </button>
            <h1 class="navbar-brand navbar-brand-autodark d-none-navbar-horizontal pe-0 pe-md-3">
              <a href="main.html">
                <img src="./static/logos.png" width="110" height="32" alt="Tabler" class="navbar-brand-image">
              </a>
            </h1>
            <div class="navbar-nav flex-row order-md-last">
              
             
              <div class="nav-item dropdown">
                <a href="#" class="nav-link d-flex lh-1 text-reset p-0" data-bs-toggle="dropdown" aria-label="Open user menu">
                  <span class="avatar avatar-sm" style="background-image: url(./static/avatars/profiles.jpg)"></span>
                  <div class="d-none d-xl-block ps-2">
                  <div id="user_login" ></div>
                  <div class="mt-1 small text-muted">Admin</div>
                </div>
                </a>
                <div class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
                  <a id="logout" href="#" class="dropdown-item">Logout</a>
                </div>
              </div>
            </div>
          </div>
        </header>
        <div class="navbar-expand-md ">
          <div class="collapse navbar-collapse" id="navbar-menu">
            <div class="navbar navbar-expand-md navbar-light  d-print-none ">
              <div class="container-xl">
                <ul class="navbar-nav">
                  <li class="nav-item ">
                    <a class="nav-link" href="main.html" >
                      <span class="nav-link-icon d-md-none d-lg-inline-block">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><polyline points="5 12 3 12 12 3 21 12 19 12" /><path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" /><path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" /></svg>
                      </span>
                      <span class="nav-link-title">
                        Home
                      </span>
                    </a>
                  </li>
                 
				   <li class="nav-item">
                    <a class="nav-link" href="manage_users.html" >
                      <span class="nav-link-icon d-md-none d-lg-inline-block">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><<polyline points="12 3 20 7.5 20 16.5 12 21 4 16.5 4 7.5 12 3" /><line x1="12" y1="12" x2="20" y2="7.5" /><line x1="12" y1="12" x2="12" y2="21" /><line x1="12" y1="12" x2="4" y2="7.5" /><line x1="16" y1="5.25" x2="8" y2="9.75" /></svg>
                      </span>
                      <span class="nav-link-title">
                        Manage Users
                      </span>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="manage_soil.html" >
                      <span class="nav-link-icon d-md-none d-lg-inline-block">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><polyline points="9 11 12 14 20 6" /><path d="M20 12v6a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h9" /></svg>
                      </span>
                      <span class="nav-link-title">
                        Manage Soil
                      </span>
                    </a>
                  </li>
				  <li class="nav-item">
                    <a class="nav-link" href="manage_plants.html" >
                      <span class="nav-link-icon d-md-none d-lg-inline-block">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><rect x="4" y="4" width="6" height="5" rx="2" /><rect x="4" y="13" width="6" height="7" rx="2" /><rect x="14" y="4" width="6" height="7" rx="2" /><rect x="14" y="15" width="6" height="5" rx="2" /></svg>
                      </span>
                      <span class="nav-link-title">
                        Manage Plants
                      </span>
                    </a>
                  </li>
                  
				  <li class="nav-item">
                    <a class="nav-link" href="manage_fertilizer.html" >
                      <span class="nav-link-icon d-md-none d-lg-inline-block">
						<svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="12" cy="7" r="3" /><circle cx="17" cy="16" r="3" /><circle cx="7" cy="16" r="3" /></svg></span>
                      <span class="nav-link-title">
                        Manage Fertilizer
                      </span>
                    </a>
                  </li>
                  
                </ul>
                
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="page-wrapper">
        <div class="container-xl">
          <!-- Page title -->
          <div class="page-header d-print-none">
            
		  <br>
			<div class="row align-items-center">
              <div class="col">
                <!-- Page pre-title -->
                <div class="page-pretitle">
                  Plant Informations
                </div>
                
              </div>
            </div>
        </div>
        <div class="page-body">
          <div class="container-xl">
			
			<div class="col d-flex justify-content-center">
              <div class="card" style="width: 30rem;">
					
                <div class="card-body">
					
                  <form enctype="multipart/form-data" id="entry-form" method="POST" action="" >
					
					<div class="tab">
					<br>
					<center><img id="output" src="./static/avatars/plant_defaults.jpg" width="100" height="100" class="img-thumbnail"/></center>
					<br>
					  <div class="form-group mb-3 ">					
                      <label class="form-label">Plant Picture</label>
                      <div>
                        <input type="file" class="form" name="file" id="file" accept="image/*" onchange="loadFile(event)" placeholder="Plant Picture" oninput="this.className = ''" required> 
                      </div>
                    </div>
					<div class="form-group mb-3 ">
                      <label class="form-label">Plant Name</label>
                      <div>
                        <input type="text" class="form" name="plant_name" id="plant_name" placeholder="Plant Name" oninput="this.className = ''" required> 
                      </div>
                    </div>				
					<div class="form-group mb-3 ">
                      <label class="form-label">Plant Type</label>
                      <div>
                        <input type="text" class="form" name="plant_type" id="plant_type" placeholder="Plant Type" oninput="this.className = ''" required> 
                      </div>
                    </div>
					<div class="form-group mb-3">
                        <label class="form-label">Plant Descriptions</label>
                        <textarea class="form" rows="6" name="plant_desc" id="plant_desc" oninput="this.className = ''" required></textarea>
                    </div>
					</div>

					<div class="tab">
					<div class="page-pretitle">
					  Recommended seasons
					</div>
					<br>
					
					<div class="form-group mb-3" >
                      <label class="form-label">Seasons</label>
                      <div >
                        <select class="form" name="seasons" id="seasons" oninput="this.className = ''" required="">
                          <option value="">Select Seasons</option>
                          <option value="Rainy Season">Rainy Season</option>
                          <option value="Dry Season">Dry Season</option>
                          <option value="Summer Season">Summer Season</option>
						</select>
                      </div>
                    </div>
					
					<div class="form-group mb-3" >
                      <label class="form-label">From</label>
                      <div >
                        <select class="form" name="month_from" id="month_from" oninput="this.className = ''" required="">
                          <option value="">Select Month</option>
                          <option value="January">January</option>
                          <option value="February">February</option>
                          <option value="March">March</option>
                          <option value="April">April</option>
                          <option value="May">May</option>
                          <option value="June">June</option>
                          <option value="July">July</option>
                          <option value="August">August</option>
                          <option value="September">September</option>
                          <option value="October">October</option>
                          <option value="November">November</option>
                          <option value="December">December</option>
                        </select>
                      </div>
                    </div>
					
					<div class="form-group mb-3">
						<label class="form-label">To</label>
                      <div>
                        <select class="form" name="month_to" id="month_to" oninput="this.className = ''" required="">
                          <option value="">Select Month</option>
						  <option value="January">January</option>
                          <option value="February">February</option>
                          <option value="March">March</option>
                          <option value="April">April</option>
                          <option value="May">May</option>
                          <option value="June">June</option>
                          <option value="July">July</option>
                          <option value="August">August</option>
                          <option value="September">September</option>
                          <option value="October">October</option>
                          <option value="November">November</option>
                          <option value="December">December</option>
                        </select>
                      </div>
					  <div style="line-height:40%;">
							<br>
						</div>
					  <small class="form-hint">
                          Choose the right seasons month for a certain plant for planting 
                        </small>
					  <br>
                    </div>
					</div>


					<div style="overflow:auto;">
					  <div style="float:right;">
						<button type="button" class="btn btn-secondary btn-pill" id="prevBtn" onclick="nextPrev(-1)">Previous</button>
						<button type="button" class="btn btn-teal btn-pill" id="nextBtn" onclick="nextPrev(1)">Next</button>
						 <button type="submit" id="submit_id" class="btn btn-teal btn-pill">Submit</button>
					  </div>
					</div>

					<!-- Circles which indicates the steps of the form: -->
					<div style="text-align:center;margin-top:40px;">
					  <span class="step"></span>
					  <span class="step"></span>
					</div>
                  </form>
                </div>
              </div>
            </div>
			
				<div id="confirmation_failed" class="alert alert-danger invisible">
				<span class="fas fa-circle-notch fa-spin"></span> Entry failed!
				</div>
		</div>
    </div>
    <div class="modal modal-blur fade" id="modal-success" tabindex="-1" role="dialog" aria-hidden="true">
      <div class="modal-dialog modal-sm modal-dialog-centered" role="document">
        <div class="modal-content">
          <a type="button"  href="add_plants_on_index.html" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></a>
          <div class="modal-status bg-success"></div>
          <div class="modal-body text-center py-4">
            
            <svg xmlns="http://www.w3.org/2000/svg" class="icon mb-2 text-green icon-lg" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="12" cy="12" r="9" /><path d="M9 12l2 2l4 -4" /></svg>
            <h3>Plant successfully saved</h3>
    
          </div>
          <div class="modal-footer">
            <div class="w-100">
              <div class="row">
                <div class="col"><a href="main.html" class="btn btn-white w-100">
                    Go to dashboard
                  </a></div>
                <div class="col"><a href="add_plants_on_index.html" class="btn btn-success w-100">
                    Add New
                  </a></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
	</div>
	</div>
	</div>
    <!-- Libs JS -->
    <script src="dist/libs/apexcharts/dist/apexcharts.min.js"></script>
    <!-- Tabler Core -->
    <script src="dist/js/tabler.min.js"></script>
    <script src="dist/js/jquery.min.js"></script>
	<script>
	var currentTab = 0; // Current tab is set to be the first tab (0)
	showTab(currentTab); // Display the current tab

	function showTab(n) {
	  // This function will display the specified tab of the form ...
	  var x = document.getElementsByClassName("tab");
	  x[n].style.display = "block";
	  // ... and fix the Previous/Next buttons:
	  if (n == 0) {
		document.getElementById("prevBtn").style.display = "none";
	  } else {
		document.getElementById("prevBtn").style.display = "inline";
	  }
	  if (n == (x.length - 1)) {
		$("#nextBtn").hide();
		$("#submit_id").show();
	  } else {
	  $("#nextBtn").show();
	  $("#submit_id").hide();
		document.getElementById("nextBtn").innerHTML = "Next";
	  }
	  // ... and run a function that displays the correct step indicator:
	  fixStepIndicator(n)
	}

	function nextPrev(n) {
	  // This function will figure out which tab to display
	  var x = document.getElementsByClassName("tab");
	  // Exit the function if any field in the current tab is invalid:
	  if (n == 1 && !validateForm()) return false;
	  // Hide the current tab:
	  x[currentTab].style.display = "none";
	  // Increase or decrease the current tab by 1:
	  currentTab = currentTab + n;
	  // if you have reached the end of the form... :
	  if (currentTab >= x.length) {
		//...the form gets submitted:
		document.getElementById("regForm").submit();
		return false;
	  }
	  // Otherwise, display the correct tab:
	  showTab(currentTab);
	}

	function validateForm() {
	  // This function deals with validation of the form fields
	  var x, y, i, z, a, valid = true;
	  x = document.getElementsByClassName("tab");
	  y = x[currentTab].getElementsByTagName("input");
	  z = x[currentTab].getElementsByTagName("textarea");
	  a = x[currentTab].getElementsByTagName("select");
	  // A loop that checks every input field in the current tab:
	  for (i = 0; i < y.length; i++) {
		// If a field is empty...
		if (y[i].value == "") {
		  // add an "invalid" class to the field:
		  y[i].className += " invalid";
		  // and set the current valid status to false:
		  valid = false;
		}
	  }
	  for (i = 0; i < z.length; i++) {
		// If a field is empty...
		if (z[i].value == "") {
		  // add an "invalid" class to the field:
		  z[i].className += " invalid";
		  // and set the current valid status to false:
		  valid = false;
		}
	  }
	  for (i = 0; i < a.length; i++) {
		// If a field is empty...
		if (a[i].value == "") {
		  // add an "invalid" class to the field:
		  a[i].className += " invalid";
		  // and set the current valid status to false:
		  valid = false;
		}
	  }
	  // If the valid status is true, mark the step as finished and valid:
	  if (valid) {
		document.getElementsByClassName("step")[currentTab].className += " finish";
	  }
	  return valid; // return the valid status
	}

	function fixStepIndicator(n) {
	  // This function removes the "active" class of all steps...
	  var i, x = document.getElementsByClassName("step");
	  for (i = 0; i < x.length; i++) {
		x[i].className = x[i].className.replace(" active", "");
	  }
	  //... and adds the "active" class to the current step:
	  x[n].className += " active";
	}
	</script>
	<style>
	.show {
		transition: opacity 1ms; // You can play with the 1
	}
	#output {
	  border: 1px solid #555;
	}	
	select {
	  padding: 10px;
	  width: 100%;
	  font-size: 14px;
	  border: 1px solid #aaaaaa;
	  background-color: #f4f6fa;
	}

	/* Mark input boxes that gets an error on validation: */
	select.invalid {
	  background-color: #ffdddd;
	}
	
	textarea {
	  padding: 10px;
	  width: 100%;
	  font-size: 14px;
	  border: 1px solid #aaaaaa;
	  background-color: #f4f6fa;
	}

	/* Mark input boxes that gets an error on validation: */
	textarea.invalid {
	  background-color: #ffdddd;
	}
	/* Style the input fields */
	input {
	  padding: 10px;
	  width: 100%;
	  font-size: 14px;
	  border: 1px solid #aaaaaa;
	  background-color: #f4f6fa;
	}

	/* Mark input boxes that gets an error on validation: */
	input.invalid {
	  background-color: #ffdddd;
	}
	
	#file {
	  padding: 10px;
	  width: 100%;
	  font-size: 14px;
	  border: 1px solid #aaaaaa;
	  background-color: #f4f6fa;
	}

	/* Mark input boxes that gets an error on validation: */
	#file.invalid {
	  background-color: #ffdddd;
	}

	/* Hide all steps by default: */
	.tab {
	  display: none;
	}

	/* Make circles that indicate the steps of the form: */
	.step {
	  height: 15px;
	  width: 15px;
	  margin: 0 2px;
	  background-color: #bbbbbb;
	  border: none;
	  border-radius: 50%;
	  display: inline-block;
	  opacity: 0.5;
	}

	/* Mark the active step: */
	.step.active {
	  opacity: 1;
	}

	/* Mark the steps that are finished and valid: */
	.step.finish {
	  background-color: #04AA6D;
	}
	</style>
	<script>
	function myFunction() {
	var x = document.getElementById("pwd");
	if (x.type === "password") {
		x.type = "text";
	} else {
		x.type = "password";
		}
	}

	</script>
	<script>
	  var loadFile = function(event) {
		var output = document.getElementById('output');
		output.src = URL.createObjectURL(event.target.files[0]);
		output.onload = function() {
		  URL.revokeObjectURL(output.src) // free memory
		}
	  };
	</script>

	<script>
	 
	$(document).ready(function (e){
	$("#entry-form").on('submit',(function(e){
			$("#submit_id").prop("disabled", true);
			// add spinner to button
			$("#submit_id").html(
			"<span class='spinner-border spinner-border-sm' role='status' aria-hidden='true'></span>  &nbspLoading..."
			);
	e.preventDefault();
	$.ajax({
	url: "api/add_plants.php",
	type: "POST",
	data:  new FormData(this),
	contentType: false,
	cache: false,
	processData:false,
	success: function(data){
		if(data == 1)
		{
			
			$("#modal-success").modal('toggle');
		}
		else if(data = 'noresult')
		{
			alert("Entry failed")
			$("#submit_id").prop("disabled", false);
			$("#submit_id").html(
			"<span  role='status' aria-hidden='true'></span> Submit"
			);
		}
		
	},
	error: function(){} 	        
	});
	}));
	});
</script>
	<script>
		
		 $("#seasons").change(function(){
			var newSeasons = $(this).children("option:selected").val();
				
				if(newSeasons == "Rainy Season")
			   {
					$("#month_from").val("June");
					$("#month_to").val("November");
			   }
			   else if(newSeasons == "Dry Season")
			   {
					$("#month_from").val("December");
					$("#month_to").val("February");
			   }
			   else if(newSeasons == "Summer Season")
			   {
					$("#month_from").val("March");
					$("#month_to").val("May");
			   }
			   else
			   {
					$("#month_from").val("");
					$("#month_to").val("");
			   }
		});

	</script>
<script>
	function getCookie(cName) {
	    const name = cName + "=";
	    const cDecoded = decodeURIComponent(document.cookie); //to be careful
	    const cArr = cDecoded .split('; ');
	    let res;
	    cArr.forEach(val => {
		  if (val.indexOf(name) === 0) res = val.substring(name.length);
	    })
	    return res;
	  }
			
	  function eraseCookie(name) {   
		document.cookie = name +'=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;';
	  }
	  
	  var user_name = getCookie('user_name');
	  var pwd = getCookie('pwd');
	  
	  //alert(usr + " " + pwd + " " + uty);
	  
	  if(user_name == undefined){
	      window.location.replace('index.html');
	  }
	  
	  $(document).ready(function(){
		  $.ajax({    //create an ajax request to display.php
				type: "GET",
				url: "api/get-current-login-data.php?id="+ user_name,             
				dataType: "html",   //expect html to be returned                
				success: function(response){                    
					$("#user_login").html(response); 
					//alert(response);
				}

			});	
		});
	</script>
	<script>
		$(document).ready(function(){
          $("#logout").click(function(){
            eraseCookie("user_name");
            eraseCookie("pwd");
            alert("Thank you for using the app.");
            window.location.replace('index.html');
          });
        });
	</script>
  </body>
</html>